!function(e){var r={};function a(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=e,a.c=r,a.d=function(e,r,n){a.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(r,"a",r),r},a.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},a.p="",a(a.s=5)}([function(e,r){const a={count:"至少要有15張卡",character_count:"重複角色太多",empty_character:"不能有空白角色",illegal_cardfile:"卡組資料格式錯誤",illegal_value:"卡片數值請用數字填入",illegal_star:"卡片星級請用數字填入，僅限1~5",illegal_dupe:"卡片突破請用數字填入，僅限0~4",illegal_character:"請填入正確角色名稱",illegal_name:"請用文字敘述卡片名稱",illegal_event:"倍卡格式錯誤"},n={colors:["red","blue","yellow"],team_template:{total:0,skillname:"無技能",skillbuff:0,members:[]},card_template:{id:0,star:1,character:"",cardname:"",red:0,blue:0,yellow:0,event:!1,dupe:0},member_template:{id:-1,star:1,character:"",cardname:"",value:0,event:!1,dupe:0},warning:a,level_big:[1e4,11450,13110,15011,17187,19680,22533,25801,29542,33818,38721,44346,50763,58123,66550,76199,87247,99897,114382,130967,149957,171700,196596,225102,257741,295113,337904,387033,443152,5e5],level_postbig:[4e4,46680,54475,63572,74189,89579,101038,117911,137602,160582,187399,218695,255217,297838,347577,405623,473362,552413,644666,75e4],level_emer:[7e4,84700,102487,124009,150051,181560,219687,265821,321643,389188,470917,569809,689481,834256,1e6]};CheckNaturalNum=function(e){return void 0!=e&&!!(Number.isInteger(e)&&e>-1)},CopyByValue=function(e){return JSON.parse(JSON.stringify(e))},Arrangeable=function(e,r){if(e.length<15)return a.count;for(var n=0,t={},l=0;l<r.length;l++)t[r[l]]=0;for(l=0;l<e.length;l++){var o=e[l].character;if(""===o)return a.empty_character;if(void 0===t[o])return a.illegal_character;t[o]<3&&(n++,t[o]++)}return n<15?a.character_count:null},IsLegal=function(e,r){if(void 0==e||null==e)return a.illegal_cardfile;if(e.constructor!==Array)return a.illegal_cardfile;for(var n={},t=0;t<r.length;t++)n[r[t]]=0;for(t=0;t<e.length;t++){if(!CheckNaturalNum(e[t].red)||!CheckNaturalNum(e[t].blue)||!CheckNaturalNum(e[t].yellow))return a.illegal_value;if(!CheckNaturalNum(e[t].star)||e[t].star>5)return a.illegal_value;if(!CheckNaturalNum(e[t].dupe)||e[t].dupe>4)return a.illegal_value;if("string"!=typeof e[t].character)return a.illegal_character;if(void 0===n[e[t].character])return a.illegal_character;if("string"!=typeof e[t].cardname)return a.illegal_name;if("boolean"!=typeof e[t].event)return a.illegal_event}return null},array_dupe=function(){for(var e=this.concat(),r=0;r<e.length;++r)for(var a=r+1;a<e.length;++a)e[r]===e[a]&&e.splice(a,1);return e},array_equals=function(e){if(!e)return!1;if(this.length!=e.length)return!1;for(var r=0;r<this.length;r++){if(e[r]instanceof Array&&this[r]instanceof Array)return this[r].equals(e[r]);if(e[r]!==this[r])return!1}return!0},ExtendArray=function(){Array.prototype.dupe=array_dupe,Array.prototype.equals=array_equals},e.exports={CheckNaturalNum:CheckNaturalNum,CopyByValue:CopyByValue,ExtendArray:ExtendArray,Arrangeable:Arrangeable,IsLegal:IsLegal,Const:n}},function(e,r,a){var n=a(0);n.ExtendArray(),sort_cards=function(e,r,a,n){if(!(a>=n)){var t=e[a][r];1==e[a].event&&(t=e[a][r]*(.5*e[a].dupe+2));for(var l=a,o=n+1;;){for(;l+1<=n&&card_greater(e[++l],r,t););for(;o-1>=a&&card_less(e[--o],r,t););if(!(l<o))break;var u=e[l];e[l]=e[o],e[o]=u}u=e[a];e[a]=e[o],e[o]=u,sort_cards(e,r,a,o-1),sort_cards(e,r,o+1,n)}},card_to_team=function(e,r){return{id:e.id,star:e.star,character:e.character,cardname:e.cardname,value:e[r],event:e.event,dupe:e.dupe}},card_greater=function(e,r,a){return!0===e.event?value=e[r]*(.5*e.dupe+2):value=e[r],value>a},card_less=function(e,r,a){return!0===e.event?value=e[r]*(.5*e.dupe+2):value=e[r],value<a},calculate_total=function(e,r){for(var a=0,n=0,t="",l=0;l<5;l++){var o=e.members[l].value;!0===e.members[l].event&&(o*=.5*e.members[l].dupe+2),a+=o}return r.filter(function(r){return-1!==r.members.indexOf(e.members[0].character)}).forEach(function(r){for(var a=1,l=1;l<5;l++)e.members[0].character!==e.members[l].character&&-1!==r.members.indexOf(e.members[l].character)&&a++;a==r.members.length&&(n+=r.buff,t=0===t.length?r.name:t+"+"+r.name)}),e.total=Math.floor(a*(100+n)/100),e.skillbuff=n,e.skillname=0===t.length?"無技能":t,e.total},arrange_one=function(e,r,a,t,l){var o=[];a.forEach(function(a){var t=n.CopyByValue(n.Const.team_template);a.members.every(function(a){var n=r.findIndex(function(e){return e.character===a&&-1===l.indexOf(e.id)});return-1!==n&&-1===l.indexOf(r[n].id)&&(t.members.push(card_to_team(r[n],e)),!0)}),t.members.length===a.members.length&&(t.skillname=a.name,t.skillbuff=a.buff,o.push(t))}),o.push(n.CopyByValue(n.Const.team_template)),o.forEach(function(a){for(var n=0;a.members.length<5&&n<r.length;)-1===a.members.findIndex(function(e){return e.character==r[n].character})&&-1===l.indexOf(r[n].id)?a.members.push(card_to_team(r[n],e)):n++});var u=-1,c=null;if(o.forEach(function(e){total=calculate_total(e,t),total>u&&(u=total,c=e)}),null!==c)for(var m=0;m<c.members.length;m++)l.push(c.members[m].id);else console.log(o);return c},arrange_two=function(e,r,a,t,l){var o=[];a.forEach(function(a){var t=n.CopyByValue(n.Const.team_template);a.members.every(function(a){var n=r.findIndex(function(e){return e.character===a&&-1===l.indexOf(e.id)});return-1!==n&&-1===l.indexOf(r[n].id)&&(t.members.push(card_to_team(r[n],e)),!0)}),t.members.length===a.members.length&&(t.skillname=a.name,t.skillbuff=a.buff,o.push(t))}),o.push(n.CopyByValue(n.Const.team_template));for(var u=[],c=0;c<o.length;c++)for(var m=c;m<o.length;m++){for(var i=o[c].skillbuff<o[m].skillbuff?[o[m],o[c]]:[o[c],o[m]],s=n.CopyByValue(i),f=!0,d=0;d<s[0].members.length;d++){var b=s[1].members.findIndex(function(e){return s[0].members[d].id===e.id});if(-1!==b){var h=r.findIndex(function(e){return e.character===s[1].members[b].character&&e.id!==s[1].members[b].id});if(-1===h){f=!1;break}s[1].members[b]=card_to_team(r[h],e)}}f&&u.push(n.CopyByValue(s))}u.forEach(function(a){for(var n=0;a[0].members.length<5&&n<r.length;){var t=a[0].members.findIndex(function(e){return e.character===r[n].character}),l=a[1].members.findIndex(function(e){return e.id===r[n].id});-1===t&&-1===l?a[0].members.push(card_to_team(r[n],e)):n++}for(n=0;a[1].members.length<5&&n<r.length;){t=a[1].members.findIndex(function(e){return e.character===r[n].character});var o=a[0].members.findIndex(function(e){return e.id===r[n].id});-1===t&&-1===o?a[1].members.push(card_to_team(r[n],e)):n++}});var g=-1,v=null;if(u.forEach(function(e){var r=calculate_total(e[0],t),a=calculate_total(e[1],t),n=r+a;if(n>g){if(g=n,r<a){var l=e[0];e[0]=e[1],e[1]=l}v=e}}),null!==v){for(var p=0;p<v[0].members.length;p++)l.push(v[0].members[p].id);for(p=0;p<v[1].members.length;p++)l.push(v[1].members[p].id)}else console.log(u);return v},arrange_three=function(e,r,a,t,l,o){var u=[];a.forEach(function(a){var t=n.CopyByValue(n.Const.team_template);a.members.every(function(a){var n=r.findIndex(function(e){return e.character===a&&-1===l.indexOf(e.id)});return-1!==n&&-1===l.indexOf(r[n].id)&&(t.members.push(card_to_team(r[n],e)),!0)}),t.members.length===a.members.length&&(t.skillname=a.name,t.skillbuff=a.buff,u.push(t))}),u.push(n.CopyByValue(n.Const.team_template));for(var c=[],m=0;m<u.length;m++)for(var i=m;i<u.length;i++)for(var s=i;s<u.length;s++){var f=[];f=u[m].skillbuff<u[i].skillbuff?[u[i],u[m]]:[u[m],u[i]],f=u[s].skillbuff<f[1].skillbuff?f.concat(u[s]):u[s].skillbuff>f[0].skillbuff?[u[s]].concat(f):[f[0],u[s],f[1]];for(var d=n.CopyByValue(f),b=!0,h=0;h<d[0].members.length;h++){var g,v=d[1].members.findIndex(function(e){return d[0].members[h].id===e.id});if(-1!==v){if(-1===(g=r.findIndex(function(e){return e.character===d[1].members[v].character&&e.id!==d[1].members[v].id}))){b=!1;break}d[1].members[v]=card_to_team(r[g],e)}if(-1!==(_=d[2].members.findIndex(function(e){return d[0].members[h].id===e.id}))){if(-1===(p=r.findIndex(function(e){return e.character===d[2].members[_].character&&(e.id!==d[2].members[_].id&&(-1===v||e.id!==r[g].id))}))){b=!1;break}d[2].members[_]=card_to_team(r[p],e)}}for(h=0;h<d[1].members.length;h++){var p,_=d[2].members.findIndex(function(e){return d[1].members[h].id===e.id}),y=d[0].members.findIndex(function(e){return d[1].members[h].id===e.id});if(-1!==_&&-1===y){if(-1===(p=r.findIndex(function(e){return e.character===d[2].members[_].character&&e.id!==d[2].members[_].id}))){b=!1;break}d[2].members[_]=card_to_team(r[p],e)}}b&&c.push(n.CopyByValue(d))}c.forEach(function(a){for(var n=0;a[0].members.length<5&&n<r.length;){var t=a[0].members.findIndex(function(e){return e.character===r[n].character}),l=a[1].members.findIndex(function(e){return e.id===r[n].id}),o=a[2].members.findIndex(function(e){return e.id===r[n].id});-1===t&&-1===l&&-1===o?a[0].members.push(card_to_team(r[n],e)):n++}for(n=0;a[1].members.length<5&&n<r.length;){t=a[1].members.findIndex(function(e){return e.character===r[n].character});var u=a[0].members.findIndex(function(e){return e.id===r[n].id});o=a[2].members.findIndex(function(e){return e.id===r[n].id});-1===t&&-1===u&&-1===o?a[1].members.push(card_to_team(r[n],e)):n++}for(n=0;a[2].members.length<5&&n<r.length;){t=a[2].members.findIndex(function(e){return e.character===r[n].character}),u=a[0].members.findIndex(function(e){return e.id===r[n].id}),l=a[1].members.findIndex(function(e){return e.id===r[n].id});-1===t&&-1===u&&-1===l?a[2].members.push(card_to_team(r[n],e)):n++}});var k=null,C=[-1,-1,-1],x=[-1,-1,-1];if(c.forEach(function(e){if(x[0]=calculate_total(e[0],t),x[1]=calculate_total(e[1],t),x[2]=calculate_total(e[2],t),x[0]<x[1]?x[1]<x[2]?(e=[e[2],e[1],e[0]],x=[x[2],x[1],x[0]]):x[2]<x[0]?(e=[e[1],e[0],e[2]],x=[x[1],x[0],x[2]]):(e=[e[1],e[2],e[0]],x=[x[1],x[2],x[0]]):x[0]<x[2]?(e=[e[2],e[0],e[1]],x=[x[2],x[0],x[1]]):x[2]<x[1]||(e=[e[0],e[2],e[1]],x=[x[0],x[2],x[1]]),o(x,C)){for(var r=0;r<3;r++)C[r]=x[r];k=e}}),null!==k){for(s=0;s<k[0].members.length;s++)l.push(k[0].members[s].id);for(s=0;s<k[1].members.length;s++)l.push(k[1].members[s].id);for(s=0;s<k[2].members.length;s++)l.push(k[2].members[s].id)}else console.log(c);return k},multiple_skill=function(e,r){var a=0,t=r.length;do{for(var l=r.length,o=l-1;o>=a;o--)for(var u=o<t?o-1:t-1;u>=0;u--){var c=r[o],m=r[u],i=c.members.concat(m.members).dupe();if(i.length!=c.members.length+m.members.length&&i.length<=5)if(void 0===r.find(function(e){if(n.CopyByValue(e.members).sort().equals(i.sort())){var r=e.name.split("+"),a=c.name.split("+"),t=m.name.split("+"),l=a.concat(t).dupe();return l.length!==a.length+t.length||l.length===r.length}return!1})){var s=0;for(u=0;u<i.length;u++)if(c.members.indexOf(i[u])>-1&&m.members.indexOf(i[u])>-1){var f=i[u];i[u]=i[s],i[s]=f,s++}i.length===c.members.length&&(r.splice(o,1),o<t&&t--,o<l&&l--),i.length===m.members.length&&(r.splice(u,1),u<t&&t--,u<l&&l--),r.push({name:c.name+"+"+m.name,members:i,buff:c.buff+m.buff})}}a=l}while(a!==r.length);return r},e.exports={sort_cards:sort_cards,calculate_total:calculate_total,arrange_one:arrange_one,arrange_two:arrange_two,arrange_three:arrange_three,multiple_skill:multiple_skill}},function(e,r){toggle_alert=function(e,r,a){var n=angular.element(document.getElementById("arrangealert"));r?(e.warning_msg="",n.fadeOut()):(e.warning_msg=a,console.log(e.warning_msg),n.fadeIn())},e.exports={toggle_alert:toggle_alert}},function(e,r){e.exports={characters:["南雲鐵虎","紫之創","真白友也","葵日向","高峯翠","姬宮桃李","仙石忍","葵裕太","天滿光","朱櫻司","春川宙","明星昴流","冰鷹北斗","遊木真","神崎颯馬","乙狩阿多尼斯","逆先夏目","大神晃牙","朔間凜月","衣更真緒","伏見弓弦","鳴上嵐","影片美伽","蓮巳敬人","天祥院英智","羽風薰","瀨名泉","守澤千秋","齋宮宗","鬼龍紅郎","日日樹涉","深海奏汰","朔間零","仁兔成鳴","月永雷歐","青葉紡"],redskill:[{name:"TrickStar",buff:13,members:["明星昴流","冰鷹北斗","衣更真緒","遊木真"]},{name:"UNDEAD",buff:13,members:["大神晃牙","朔間零","乙狩阿多尼斯","羽風薰"]},{name:"輕音部",buff:13,members:["大神晃牙","朔間零","葵日向","葵裕太"]},{name:"弓道部",buff:13,members:["蓮巳敬人","伏見弓弦","朱櫻司","月永雷歐"]},{name:"紅月",buff:10,members:["蓮巳敬人","鬼龍紅郎","神崎颯馬"]},{name:"廣播委員會",buff:10,members:["仁兔成鳴","仙石忍","遊木真"]},{name:"名門子弟",buff:10,members:["天祥院英智","朱櫻司","姬宮桃李"]},{name:"模特經驗者",buff:10,members:["遊木真","瀨名泉","鳴上嵐"]},{name:"空手道部",buff:5,members:["南雲鐵虎","鬼龍紅郎"]},{name:"最愛妹妹",buff:5,members:["月永雷歐","鬼龍紅郎"]},{name:"Switch",buff:10,members:["逆先夏目","春川宙","青葉紡"]}],blueskill:[{name:"流星隊",buff:18,members:["守澤千秋","深海奏汰","仙石忍","南雲鐵虎","高峯翠"]},{name:"學生會",buff:13,members:["天祥院英智","蓮巳敬人","衣更真緒","姬宮桃李"]},{name:"Rabbits",buff:13,members:["仁兔成鳴","天滿光","紫之創","真白友也"]},{name:"陸上部",buff:10,members:["乙狩阿多尼斯","鳴上嵐","天滿光"]},{name:"2wink",buff:5,members:["葵日向","葵裕太"]},{name:"手工藝部",buff:10,members:["齋宮宗","影片美伽","青葉紡"]},{name:"花粉症",buff:5,members:["大神晃牙","衣更真緒"]},{name:"籃球部",buff:13,members:["守澤千秋","明星昴流","衣更真緒","高峯翠"]},{name:"智慧眼鏡",buff:10,members:["蓮巳敬人","遊木真","青葉紡"]},{name:"紅茶部",buff:10,members:["紫之創","天祥院英智","朔間凜月"]},{name:"朔間兄弟",buff:5,members:["朔間零","朔間凜月"]},{name:"圖書委員",buff:2,members:["青葉紡"]}],yellowskill:[{name:"Knights",buff:18,members:["月永雷歐","瀨名泉","朔間凜月","鳴上嵐","朱櫻司"]},{name:"三奇人",buff:10,members:["朔間零","深海奏汰","日日樹涉"]},{name:"海洋生物部",buff:10,members:["深海奏汰","羽風薰","神崎颯馬"]},{name:"演劇部",buff:10,members:["日日樹涉","冰鷹北斗","真白友也"]},{name:"網球部",buff:13,members:["仁兔成鳴","瀨名泉","姬宮桃李","遊木真"]},{name:"fine",buff:13,members:["日日樹涉","天祥院英智","伏見弓弦","姬宮桃李"]},{name:"左撇子",buff:10,members:["天祥院英智","朔間凜月","葵裕太"]},{name:"擅長縫紉",buff:13,members:["鬼龍紅郎","紫之創","齋宮宗","青葉紡"]},{name:"Valkyrie",buff:5,members:["齋宮宗","影片美伽"]},{name:"遊戲研究部",buff:5,members:["逆先夏目","春川宙"]},{name:"忍者同好會",buff:2,members:["仙石忍"]}],activeskill:[{name:"FruitsParlor",buff:13,members:["朱櫻司","天滿光","葵裕太","鳴上嵐"],color:"yellow",describe:"FruitsParlor 黃+13% [ 朱櫻司 + 天滿光 + 葵裕太 + 鳴上嵐 ]"}]}},function(e,r,a){var n=a(0),t=a(3),l=a(2),o=a(1);n.ExtendArray();var u=angular.module("ESCalculator",[]),c=new FileReader;u.controller("CardGroup",["$scope",function(e){e.characters=[],e.redskill=[],e.blueskill=[],e.yellowskill=[],e.redteams=[],e.blueteams=[],e.yellowteams=[],e.cards=[],e.teams={red:e.redteams,blue:e.blueteams,yellow:e.yellowteams},e.skill={},e.color="red",e.cardcount=15,e.groupstyle=3,e.warning_msg="",e.activeskill=[],e.init=function(){console.log("init"),c.onload=function(r){var a,t=r.target.result;try{a=JSON.parse(t)}catch(r){return console.log(r),void l.toggle_alert(e,!1,n.Const.warning.illegal_cardfile)}var o=n.IsLegal(a,e.characters);if(console.log(o),l.toggle_alert(e,null===o,o),null===o){for(var u=(new Date).getTime(),c=0,m=0;m<a.length;m++)null==a[m].id&&(a[m].id=u+c,c++);e.cards=a,e.cardcount=a.length,e.$apply()}else e.$apply()};var r=n.CopyByValue(n.Const.card_template);r.id=0,e.cards.push(r);for(var a=0;a<3;a++)for(var o=n.Const.colors[a],u=0;u<3;u++){for(var m=n.CopyByValue(n.Const.team_template),i=0;i<5;i++){var s=n.CopyByValue(n.Const.member_template);m.members.push(s)}e.teams[o].push(m)}e.cardcount=e.cards.length,e.characters=t.characters,e.redskill=t.redskill,e.blueskill=t.blueskill,e.yellowskill=t.yellowskill,e.activeskill=[],e.skill={red:e.redskill,blue:e.blueskill,yellow:e.yellowskill}},e.calculate=function(){var r=e.color;e.calculate_color(e.teams[r],e.skill[r])},e.calculate_color=function(e,r){for(var a=0;a<3;a++)o.calculate_total(e[a],r)},e.changecolor=function(r){e.color=r},e.changecardcount=function(){var r=e.cards.length;if((void 0==e.cardcount||null==e.cardcount||e.cardcount<1)&&(e.cardcount=1),r!=e.cardcount){e.cards.length=e.cardcount;var a=(new Date).getTime(),t=0;if(r<e.cards.length)for(var l=r;l<e.cards.length;l++)e.cards[l]=n.CopyByValue(n.Const.card_template),e.cards[l].id=a+t,t++}},e.autoarrangeall=function(){var r=n.Arrangeable(e.cards,e.characters);if(l.toggle_alert(e,null===r,r),null===r)for(var a=n.CopyByValue(e.cards),t=0;t<n.Const.colors.length;t++){var o=n.Const.colors[t];e.arrangebycolor(a,o)}},e.arrangebycolor=function(r,a){var t=n.CopyByValue(e.teams[a]),l=n.CopyByValue(e.skill[a]),u=o.multiple_skill(a,l);o.sort_cards(r,a,0,r.length-1);var c=[];switch(e.groupstyle){case 1:for(var m=0;m<3;m++)t[m]=o.arrange_one(a,r,u,e.skill[a],c);e.teams[a]=t;break;case 2:var i=o.arrange_two(a,r,u,e.skill[a],c);t[0]=i[0],t[1]=i[1],t[2]=o.arrange_one(a,r,u,e.skill[a],c),e.teams[a]=t;break;case 3:e.teams[a]=o.arrange_three(a,r,u,e.skill[a],c,(e,r)=>{var a=e[0]+e[1]+e[2],n=r[0]+r[1]+r[2];if(a===n){var t=e[0]+e[1],l=r[0]+r[1];return t===l?e[0]>r[0]:t>l}return a>n});break;case 4:case 5:case 6:var s=4===e.groupstyle?n.Const.level_big:5===e.groupstyle?n.Const.level_postbig:n.Const.level_emer;console.log(s.length),e.teams[a]=o.arrange_three(a,r,u,e.skill[a],c,(e,r)=>{var a=e[0],n=r[0],t=Math.floor(1.5*(e[0]+e[1])),l=Math.floor(1.5*(r[0]+r[1])),o=2*(e[0]+e[1]+e[2]),u=2*(r[0]+r[1]+r[2]),c=s.findIndex(e=>e>n);c=c<0?s.length:c;var m=s.findIndex(e=>e>l);m=m<0?s.length:m;var i=s.findIndex(e=>e>u);i=i<0?s.length:i;var f=s.findIndex(e=>e>a);f=f<0?s.length:f;var d=s.findIndex(e=>e>t);d=d<0?s.length:d;var b=s.findIndex(e=>e>o);return b=b<0?s.length:b,console.log(a+"+"+t+"+"+o),b===i?d===m?f===c?b<s.length&&o!==u?o>u:d<s.length&&t!==l?t>l:a>n:f>c:d>m:b>i})}},e.clear=function(){e.cardcount=1,e.cards.length=1,e.cards[0]=n.CopyByValue(n.Const.card_template),e.cards[0].id=(new Date).getTime(),angular.element(document.getElementsByName("cardfile")[0]).val(null)},e.download=function(){var r=new Date,a=(r.getMonth()+1).toString();1==a.length&&(a="0"+a);var n=r.getDate().toString();1==n.length&&(n="0"+n);var t="es_cards_"+r.getFullYear()+a+n+".txt",l=JSON.stringify(e.cards),o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(l)),o.setAttribute("download",t),o.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)},e.upload=function(){if(void 0!=event&&void 0!=event.target&&0!=event.target.files.length){var e=event.target.files[0],r=e.name;console.log(r),c.readAsText(e)}},e.addcard=function(r,a){var t,l=(new Date).getTime();console.log(a),(t=a?n.CopyByValue(n.Const.card_template):n.CopyByValue(e.cards[r])).id=l,console.log(t),e.cards.splice(r+1,0,t)},e.removecard=function(r){if(1==e.cards.length){var a=e.cards[0].id;e.cards[0]=n.CopyByValue(n.Const.card_template),e.cards[0].id=a}else e.cards.splice(r,1)},e.$watch("cards",function(){var r=n.Arrangeable(e.cards,e.characters);l.toggle_alert(e,null===r,r),e.cardcount=e.cards.length},!0),e.init()}]),u.directive("customFileChange",function(){return{restict:"A",link:function(e,r,a){var n=e.$eval(a.customFileChange);r.on("change",n)}}}),u.directive("optionValue",function(){return{require:"ngModel",link:function(e,r,a,n){n.$parsers.push(function(e){return null!=e?parseInt(e,10):null}),n.$formatters.push(function(e){return null!=e?""+e:null})}}}),u.filter("floor",function(){return function(e){return Math.floor(e)}}),window.onload=function(){$(".loading").slideUp(500)},$(document).ready(function(){$("#cardcount").keyup(function(e){13==e.keyCode&&$(this).blur()})})},function(e,r,a){e.exports=a(4)}]);